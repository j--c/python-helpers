#!/bin/bash

project_name=$1

function write_gitignore(){
    touch .gitignore
    echo "# Byte-compiled / optimized / DLL files" >> .gitignore
    echo "__pycache__/" >> .gitignore
    echo "*.py[cod]" >> .gitignore
    echo "*.py.class" >> .gitignore
    echo "" >> .gitignore
    echo "# Virtual environment" >> .gitignore
    echo "venv/" >> .gitignore
    echo "" >> .gitignore
    echo "# Migrations / Alembic" >> .gitignore
    echo "migrations/" >> .gitignore
    echo "" >> .gitignore
    echo "# Databases" >> .gitignore
    echo "*.db" >> .gitignore
}

function create_tst(){
    tst_dir='test'
    init_file='__init__.py'
    mkdir $tst_dir
    touch $tst_dir/$init_file
}

function create_src(){
    src_dir='src'
    init_file='__init__.py'
    mkdir $src_dir
    touch $src_dir/$init_file
}

function create_basic_files(){
    create_src
    create_tst
}

if [ -z "$project_name" ]; then
    echo "Project name required!"
else
    echo "Creating project directory..."
    mkdir $project_name
    cd $project_name

    echo "Writing .gitignore..."
    write_gitignore

    echo "Creating git repo..."
    git init -b main

    echo "Creating basic files..."
    create_basic_files
fi

